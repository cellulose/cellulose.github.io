<!DOCTYPE html>
<html>
  <head>
    <title>Hub</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
    <link rel="stylesheet" href="css/elixir.css" type="text/css" media="screen" charset="utf-8" />
    <script type="text/javascript" charset="utf-8">
      relpath = '';
      if (relpath != '') relpath += '/';
    </script>

    <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/app.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/highlight.pack.js"></script>
    <script type="text/javascript" charset="utf-8">
      hljs.initHighlightingOnLoad();
      hljs.configure({languages: []}); //disable autodetect
    </script>
  </head>

  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>

    <section id="content">
      <div class="breadcrumbs">Hub v &rarr; <a href="overview.html">Overview</a> &rarr; <a href="Hub.html">Hub</a></div>
      <h1>
        Hub
        
      </h1>

      <ul class="summary_links">
        
          <li><a href="#summary">Summary</a></li>
        
        
        
          <li><a href="#functions_details">Functions</a></li>
        
        
        
      </ul>

      
        <section id="moduledoc" class="docstring">
          <p> Central state cache and update broker</p>
<p> Implements a heirarchial key-value store with publish/watch semanitcs
 at each node of the heirarchy.   Plans to support timestamping,
 version stamping, real-time playback, security,</p>
<p> The hub holds a collection of dnodes (dictionary nodes).  Each dictionary
 node is a key/value store, where the keys are atoms, and the values
 are any erlang term.  Sometimes the value is also a dnode, which results
 in a heirarchy.</p>
<p> Processes publish state on a hub, watch to state changes,
 request information about the state of the bus, and request changes
 to the state.</p>
<p> A hub is a process (a gen_server, actually) that holds state for the
 system, manages changes to state, and and routes notifications of
 changes of state.</p>
<p> The hub keeps a sequence ID for each change to state, and this is
 stored as part of the state graph, so that the hub can answer the
 question:  “show me all state that has changed since sequence XXX”</p>
<p> <strong> Limitations and areas for improvement </strong></p>
<p> Right now the store is only in memory, so a restart removes all data
 from the store.   All persistence must be implemented separately</p>
<p> There is currently no change history or playback history feature.</p>
<p> [{key,val},{key,val}...]</p>
<p> if a value at any given path is a proplist (tested as a list whose first
 term is a tuple, or an empty list).</p>
<p> some special keys that can appea</p>
<p>  mgr@        list of dependents in charge of point in graph
  wch@        list of dependents to be informed about changes</p>
<p> For convenience, you can pass in keys as atoms, but they will be converted
 to binary keys internally (all keys are stored as binaries).    They will
 be represented as binary keys when returned.  This behavior is under review
 so if you want to be sure, pass binary keys to begin with.</p>

        </section>
      

      
        <a href="http://github.com/cellulose" class="view_source">Source</a>
      

      
        <h2 id="summary">Summary<span class="detail_header_links"><a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a></span></h2>
        <table class="summary">
          <tr>
  <td class="summary_signature"><a href="#agent/1">agent(path)</a></td>
  
    <td class="summary_synopsis"><p>Returns the controlling agent for this path, or nil if none</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#deltas/2">deltas(seq, path \\ [])</a></td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#dump/1">dump(path \\ [])</a></td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#fetch/1">fetch(path \\ [])</a></td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#get/2">get(path, key)</a></td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#manage/2">manage(path, options)</a></td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#manager/1">manager(path)</a></td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#master/2">master(path, options \\ [])</a></td>
  
    <td class="summary_synopsis"><p>Associate the currrent process as the primary agent for the given
path.  This binds/configures this process to the hub, and also sets
the path as the “agent path” in the process dictionary</p>
</td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#put/2">put(path, changes)</a></td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#request/3">request(path, request, context \\ [])</a></td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#unwatch/1">unwatch(path)</a></td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#update/3">update(path, changes, context \\ [])</a></td>
  
</tr>
<tr>
  <td class="summary_signature"><a href="#watch/2">watch(path, options \\ [])</a></td>
  
</tr>

        </table>
      

      

      
        <section id="functions_details" class="details_list">
          <h2>Functions</h2>
          <section class="detail">
  <div class="detail_header" id="agent/1">
    <span class="signature"><strong>agent(path)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#agent/1" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <section class="docstring">
    <p>Returns the controlling agent for this path, or nil if none</p>

  </section>
  
    <a href="http://github.com/cellulose" class="view_source">Source</a>
  
</section>
<section class="detail">
  <div class="detail_header" id="deltas/2">
    <span class="signature"><strong>deltas(seq, path \\ [])</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#deltas/2" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <section class="docstring">
    
  </section>
  
    <a href="http://github.com/cellulose" class="view_source">Source</a>
  
</section>
<section class="detail">
  <div class="detail_header" id="dump/1">
    <span class="signature"><strong>dump(path \\ [])</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#dump/1" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <section class="docstring">
    
  </section>
  
    <a href="http://github.com/cellulose" class="view_source">Source</a>
  
</section>
<section class="detail">
  <div class="detail_header" id="fetch/1">
    <span class="signature"><strong>fetch(path \\ [])</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#fetch/1" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <section class="docstring">
    
  </section>
  
    <a href="http://github.com/cellulose" class="view_source">Source</a>
  
</section>
<section class="detail">
  <div class="detail_header" id="get/2">
    <span class="signature"><strong>get(path, key)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#get/2" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <section class="docstring">
    
  </section>
  
    <a href="http://github.com/cellulose" class="view_source">Source</a>
  
</section>
<section class="detail">
  <div class="detail_header" id="manage/2">
    <span class="signature"><strong>manage(path, options)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#manage/2" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <section class="docstring">
    
  </section>
  
    <a href="http://github.com/cellulose" class="view_source">Source</a>
  
</section>
<section class="detail">
  <div class="detail_header" id="manager/1">
    <span class="signature"><strong>manager(path)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#manager/1" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <section class="docstring">
    
  </section>
  
    <a href="http://github.com/cellulose" class="view_source">Source</a>
  
</section>
<section class="detail">
  <div class="detail_header" id="master/2">
    <span class="signature"><strong>master(path, options \\ [])</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#master/2" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <section class="docstring">
    <p>Associate the currrent process as the primary agent for the given
path.  This binds/configures this process to the hub, and also sets
the path as the “agent path” in the process dictionary</p>

  </section>
  
    <a href="http://github.com/cellulose" class="view_source">Source</a>
  
</section>
<section class="detail">
  <div class="detail_header" id="put/2">
    <span class="signature"><strong>put(path, changes)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#put/2" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <section class="docstring">
    
  </section>
  
    <a href="http://github.com/cellulose" class="view_source">Source</a>
  
</section>
<section class="detail">
  <div class="detail_header" id="request/3">
    <span class="signature"><strong>request(path, request, context \\ [])</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#request/3" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <section class="docstring">
    
  </section>
  
    <a href="http://github.com/cellulose" class="view_source">Source</a>
  
</section>
<section class="detail">
  <div class="detail_header" id="unwatch/1">
    <span class="signature"><strong>unwatch(path)</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#unwatch/1" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <section class="docstring">
    
  </section>
  
    <a href="http://github.com/cellulose" class="view_source">Source</a>
  
</section>
<section class="detail">
  <div class="detail_header" id="update/3">
    <span class="signature"><strong>update(path, changes, context \\ [])</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#update/3" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <section class="docstring">
    
  </section>
  
    <a href="http://github.com/cellulose" class="view_source">Source</a>
  
</section>
<section class="detail">
  <div class="detail_header" id="watch/2">
    <span class="signature"><strong>watch(path, options \\ [])</strong></span>
    <div class="detail_header_links">
      <span class="detail_type">(function)</span>
      <a href="#watch/2" class="detail_link" title="Link to this function">#</a>
      <a class="to_top_link" href="#content" title="To the top of the page">&uarr;</a>
    </div>
  </div>
  
  <section class="docstring">
    
  </section>
  
    <a href="http://github.com/cellulose" class="view_source">Source</a>
  
</section>

        </section>
      

      

      
    </section>
  </body>
</html>
